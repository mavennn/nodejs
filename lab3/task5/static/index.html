
<!DOCTYPE html>
<html lang="en">
<head>
        <meta charset="UTF-8">
        <link rel="stylesheet" href="./index.css">
        <link href="https://fonts.googleapis.com/css2?family=Commissioner:wght@900&display=swap" rel="stylesheet">
        <title>Index</title>
</head>
<body>

          <div class="logo">
            <h1>TASK 5</h1>
          </div>
          <div class="result-wrapper">
             <p id="result"></p>
          </div>
          <div class="form-wrapper">
                  <div class="form">
                          <div class="input-wrapper">
                                  <input id="email-input" type="text" placeholder="Введите свою почту" />
                                  <label for="email-input"></label>
                          </div>

                          <div class="input-wrapper">
                                  <input id="surname-input" type="text" placeholder="Введите свою фамилию " />
                                  <label for="surname-input"></label>
                          </div>

                          <div class="input-wrapper">
                                  <input id="phone-input" type="text" placeholder="Введите номер телефона" />
                                  <label for="phone-input"></label>
                          </div>
            
                          <div class="btn-wrapper">
                                 <button id="send-btn" class="btn">Отправить</button>
                          </div>

                  </div>
          </div>




		  <script type="text/javascript">
			
					 const sendButton = document.getElementById("send-btn");

					 sendButton.addEventListener("click", (event) => {

							const email = document.getElementById("email-input").value;
							const surname = document.getElementById("surname-input").value;
							const phone = document.getElementById("phone-input").value;

								fetch("http://localhost:3000/sendInfo", { 
										  method: "POST",
										  headers: {
													 'Content-Type': 'application/json'
										  },
										  body: JSON.stringify({ email, surname, phone  })
								})
                .then(res => responseHandler(res))

					 });


          const responseHandler = (res) => {
              let resultBlock = document.getElementById("result");
              switch (res.status) {
                  case 500:
                      resultBlock.innerText = "Внутренняя ошибка сервера :(";
                      break;
                  case 409:
                      resultBlock.innerText = "Такой пользователь уже есть";
                      break;
                  case 200:
                      resultBlock.innerText = "Информация добавлена";
                      break;
              }
          }


		  </script>
</body>
</html>
